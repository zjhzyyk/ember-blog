Ember.TEMPLATES.application=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,h,i,j="";return b.buffer.push('\n        <ul class="subscription">\n          <li class="dropdown">\n            <a class="dropdown-toggle" data-toggle="dropdown" href="">'),f={},h={},b.buffer.push(r(c._triageMustache.call(a,"session.username",{hash:{},contexts:[a],types:["ID"],hashContexts:h,hashTypes:f,data:b}))),b.buffer.push('</a>\n            <ul class="dropdown-menu" role="menu">\n              <li>'),f={},h={},i={hash:{},inverse:s.noop,fn:s.program(2,g,b),contexts:[a],types:["STRING"],hashContexts:h,hashTypes:f,data:b},d=c["link-to"]||a["link-to"],e=d?d.call(a,"changePassword",i):t.call(a,"link-to","changePassword",i),(e||0===e)&&b.buffer.push(e),b.buffer.push("</li>\n              <li><a "),f={},h={},b.buffer.push(r(c.action.call(a,"logout",{hash:{},contexts:[a],types:["ID"],hashContexts:h,hashTypes:f,data:b}))),b.buffer.push(">Logout</a></li>\n            </ul>\n          </li>\n        </ul>\n        "),j}function g(a,b){b.buffer.push("Change password")}function h(a,b){b.buffer.push("Blogs")}function i(a,b){b.buffer.push("Archives")}function j(a,b){var d,e,f,g,h,i="";return b.buffer.push("\n          <li>"),f={},g={},h={hash:{},inverse:s.noop,fn:s.program(9,k,b),contexts:[a],types:["STRING"],hashContexts:g,hashTypes:f,data:b},d=c["link-to"]||a["link-to"],e=d?d.call(a,"compose",h):t.call(a,"link-to","compose",h),(e||0===e)&&b.buffer.push(e),b.buffer.push("</li>\n          "),i}function k(a,b){b.buffer.push("Compose")}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var l,m,n,o,p,q="",r=this.escapeExpression,s=this,t=c.helperMissing;return e.buffer.push('<div id="main-body" class="collapse-sidebar">\n    <header role="banner">\n        <hgroup>\n            <h1><a href="/">Yukang Yang</a></h1>\n            <h2>Javascript. Artificial Intelligence.</h2>\n        </hgroup>\n    </header>\n    <nav role="navigation">\n        '),n={},o={},l=c["if"].call(b,"session.loggedIn",{hash:{},inverse:s.noop,fn:s.program(1,f,e),contexts:[b],types:["ID"],hashContexts:o,hashTypes:n,data:e}),(l||0===l)&&e.buffer.push(l),e.buffer.push('\n\n        <ul class="main-navigation">\n          <li>'),n={},o={},p={hash:{},inverse:s.noop,fn:s.program(4,h,e),contexts:[b],types:["STRING"],hashContexts:o,hashTypes:n,data:e},l=c["link-to"]||b["link-to"],m=l?l.call(b,"blogs",p):t.call(b,"link-to","blogs",p),(m||0===m)&&e.buffer.push(m),e.buffer.push("</li>\n          <li>"),n={},o={},p={hash:{},inverse:s.noop,fn:s.program(6,i,e),contexts:[b],types:["STRING"],hashContexts:o,hashTypes:n,data:e},l=c["link-to"]||b["link-to"],m=l?l.call(b,"archives",p):t.call(b,"link-to","archives",p),(m||0===m)&&e.buffer.push(m),e.buffer.push("</li>\n          "),n={},o={},m=c["if"].call(b,"session.loggedIn",{hash:{},inverse:s.noop,fn:s.program(8,j,e),contexts:[b],types:["ID"],hashContexts:o,hashTypes:n,data:e}),(m||0===m)&&e.buffer.push(m),e.buffer.push('\n        </ul>\n    </nav>\n    \n    <div id="main">\n    <div id="content">\n        '),n={},o={},e.buffer.push(r(c._triageMustache.call(b,"outlet",{hash:{},contexts:[b],types:["ID"],hashContexts:o,hashTypes:n,data:e}))),e.buffer.push('\n    </div>\n    </div>\n    <footer role="contentinfo">\n        <p>\n        Copyright &copy; 2013 - Yukang Yang\n        </p>\n    </footer>\n</div>\n'),q}),Ember.TEMPLATES.archives=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,i,j,k="";return b.buffer.push("\n				"),f={},i={},d=c["if"].call(a,"blog.showYear",{hash:{},inverse:q.noop,fn:q.program(2,g,b),contexts:[a],types:["ID"],hashContexts:i,hashTypes:f,data:b}),(d||0===d)&&b.buffer.push(d),b.buffer.push("\n				<article>\n					<h1>"),f={},i={},j={hash:{},inverse:q.noop,fn:q.program(4,h,b),contexts:[a,a],types:["STRING","ID"],hashContexts:i,hashTypes:f,data:b},d=c["link-to"]||a["link-to"],e=d?d.call(a,"blog","blog",j):r.call(a,"link-to","blog","blog",j),(e||0===e)&&b.buffer.push(e),b.buffer.push('</h1>\n					<time>\n						<span class="month">'),f={},i={},b.buffer.push(p(c._triageMustache.call(a,"blog.month",{hash:{},contexts:[a],types:["ID"],hashContexts:i,hashTypes:f,data:b}))),b.buffer.push('</span>\n						<span class="day">'),f={},i={},b.buffer.push(p(c._triageMustache.call(a,"blog.day",{hash:{},contexts:[a],types:["ID"],hashContexts:i,hashTypes:f,data:b}))),b.buffer.push('</span>\n						<span class="year">'),f={},i={},b.buffer.push(p(c._triageMustache.call(a,"blog.year",{hash:{},contexts:[a],types:["ID"],hashContexts:i,hashTypes:f,data:b}))),b.buffer.push("</span>\n					</time>\n				</article>\n			"),k}function g(a,b){var d,e,f="";return b.buffer.push("\n					<h2>"),d={},e={},b.buffer.push(p(c._triageMustache.call(a,"blog.year",{hash:{},contexts:[a],types:["ID"],hashContexts:e,hashTypes:d,data:b}))),b.buffer.push("</h2>\n				"),f}function h(a,b){var d,e,f;e={unescaped:a},f={unescaped:"STRING"},d=c._triageMustache.call(a,"blog.title",{hash:{unescaped:"true"},contexts:[a],types:["ID"],hashContexts:e,hashTypes:f,data:b}),d||0===d?b.buffer.push(d):b.buffer.push("")}function i(a,b){b.buffer.push("\n			No archive.\n			")}function j(a,b){var d,e,f="";return b.buffer.push("\n		<a "),d={},e={},b.buffer.push(p(c.action.call(a,"getMoreArchives",{hash:{},contexts:[a],types:["ID"],hashContexts:e,hashTypes:d,data:b}))),b.buffer.push(">Get more archives</a>\n		"),f}function k(a,b){b.buffer.push("\n		<a>No more archives</a>\n		")}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var l,m,n,o="",p=this.escapeExpression,q=this,r=c.helperMissing;return e.buffer.push('<div>\n	<article role="article">\n		<header>\n			<h1 class="entry-title">Blog Archive</h1>\n		</header>\n		<div id="blog-archives">\n			'),m={},n={},l=c.each.call(b,"blog","in","content",{hash:{},inverse:q.program(6,i,e),fn:q.program(1,f,e),contexts:[b,b,b],types:["ID","ID","ID"],hashContexts:n,hashTypes:m,data:e}),(l||0===l)&&e.buffer.push(l),e.buffer.push('\n		</div>\n	</article>\n	<div class="pagination">\n		'),m={},n={},l=c["if"].call(b,"hasMore",{hash:{},inverse:q.program(10,k,e),fn:q.program(8,j,e),contexts:[b],types:["ID"],hashContexts:n,hashTypes:m,data:e}),(l||0===l)&&e.buffer.push(l),e.buffer.push("\n	</div>\n</div>"),o}),Ember.TEMPLATES.blog=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,h,i,j="";return b.buffer.push("\n				&nbsp;|&nbsp;\n				"),f={},h={},i={hash:{},inverse:l.noop,fn:l.program(2,g,b),contexts:[a,a],types:["STRING","ID"],hashContexts:h,hashTypes:f,data:b},d=c["link-to"]||a["link-to"],e=d?d.call(a,"edit","content",i):m.call(a,"link-to","edit","content",i),(e||0===e)&&b.buffer.push(e),b.buffer.push("\n				&nbsp;|&nbsp;\n				<a href "),f={},h={},b.buffer.push(n(c.action.call(a,"deletePost",{hash:{},contexts:[a],types:["STRING"],hashContexts:h,hashTypes:f,data:b}))),b.buffer.push(">Delete</a>\n				"),j}function g(a,b){b.buffer.push("Edit")}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var h,i,j,k="",l=this,m=c.helperMissing,n=this.escapeExpression;return e.buffer.push('<div>\n	<article class="hentry compose" role="article">\n		<header>\n			<h1 class="entry-title">'),i={unescaped:b},j={unescaped:"STRING"},h=c._triageMustache.call(b,"title",{hash:{unescaped:"true"},contexts:[b],types:["ID"],hashContexts:i,hashTypes:j,data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push('</h1>\n			<p class="meta">\n				<time>'),j={},i={},e.buffer.push(n(c._triageMustache.call(b,"date",{hash:{},contexts:[b],types:["ID"],hashContexts:i,hashTypes:j,data:e}))),e.buffer.push("</time>\n				"),j={},i={},h=c["if"].call(b,"session.loggedIn",{hash:{},inverse:l.noop,fn:l.program(1,f,e),contexts:[b],types:["ID"],hashContexts:i,hashTypes:j,data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push('\n			</p>\n		</header>\n		<div class="entry-content">'),i={unescaped:b},j={unescaped:"STRING"},h=c._triageMustache.call(b,"model.content",{hash:{unescaped:"true"},contexts:[b],types:["ID"],hashContexts:i,hashTypes:j,data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push("</div>\n	</article>\n</div>"),k}),Ember.TEMPLATES.blogs=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,h,i,j="";return b.buffer.push('\n		<article>\n			<header>\n				<h1 class="entry-title">\n					'),f={},h={},i={hash:{},inverse:o.noop,fn:o.program(2,g,b),contexts:[a,a],types:["STRING","ID"],hashContexts:h,hashTypes:f,data:b},d=c["link-to"]||a["link-to"],e=d?d.call(a,"blog","blog",i):p.call(a,"link-to","blog","blog",i),(e||0===e)&&b.buffer.push(e),b.buffer.push('\n				</h1>\n				<p class="meta">\n					<time>'),f={},h={},b.buffer.push(q(c._triageMustache.call(a,"blog.date",{hash:{},contexts:[a],types:["ID"],hashContexts:h,hashTypes:f,data:b}))),b.buffer.push('</time>\n				</p>\n			</header>\n			<div class="entry-content">'),h={unescaped:a},f={unescaped:"STRING"},e=c._triageMustache.call(a,"blog.content",{hash:{unescaped:"true"},contexts:[a],types:["ID"],hashContexts:h,hashTypes:f,data:b}),(e||0===e)&&b.buffer.push(e),b.buffer.push("</div>\n		</article>\n	"),j}function g(a,b){var d,e,f;e={unescaped:a},f={unescaped:"STRING"},d=c._triageMustache.call(a,"blog.title",{hash:{unescaped:"true"},contexts:[a],types:["ID"],hashContexts:e,hashTypes:f,data:b}),d||0===d?b.buffer.push(d):b.buffer.push("")}function h(a,b){b.buffer.push("\n	No blogs.\n	")}function i(a,b){var d,e,f="";return b.buffer.push("\n		<a "),d={},e={},b.buffer.push(q(c.action.call(a,"getMoreBlogs",{hash:{},contexts:[a],types:["ID"],hashContexts:e,hashTypes:d,data:b}))),b.buffer.push(">Get more blogs</a>\n		"),f}function j(a,b){b.buffer.push("\n		<a>No more blogs</a>\n		")}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var k,l,m,n="",o=this,p=c.helperMissing,q=this.escapeExpression;return e.buffer.push('<div class="blog-index">\n	'),l={},m={},k=c.each.call(b,"blog","in","content",{hash:{},inverse:o.program(4,h,e),fn:o.program(1,f,e),contexts:[b,b,b],types:["ID","ID","ID"],hashContexts:m,hashTypes:l,data:e}),(k||0===k)&&e.buffer.push(k),e.buffer.push('\n	<div class="pagination">\n		'),l={},m={},k=c["if"].call(b,"hasMore",{hash:{},inverse:o.program(8,j,e),fn:o.program(6,i,e),contexts:[b],types:["ID"],hashContexts:m,hashTypes:l,data:e}),(k||0===k)&&e.buffer.push(k),e.buffer.push("\n	</div>\n</div>"),n}),Ember.TEMPLATES.change_password=Ember.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var f,g,h,i,j="",k=this.escapeExpression,l=c.helperMissing;return e.buffer.push('<form role="form" id="change-password-form" '),g={on:b},h={on:"STRING"},e.buffer.push(k(c.action.call(b,"changePassword",{hash:{on:"submit"},contexts:[b],types:["ID"],hashContexts:g,hashTypes:h,data:e}))),e.buffer.push(">\n    "),g={"class":b,value:b,type:b,placeholder:b},h={"class":"STRING",value:"ID",type:"STRING",placeholder:"STRING"},i={hash:{"class":"form-control form-group",value:"oldPassword",type:"password",placeholder:"Old password"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n    "),g={"class":b,value:b,type:b,placeholder:b},h={"class":"STRING",value:"ID",type:"STRING",placeholder:"STRING"},i={hash:{"class":"form-control form-group",value:"newPassword",type:"password",placeholder:"New password"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n    "),g={"class":b,type:b,value:b},h={"class":"STRING",type:"STRING",value:"STRING"},i={hash:{"class":"btn btn-primary col-md-12",type:"submit",value:"Change password"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n</form>"),j}),Ember.TEMPLATES.compose=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return b.buffer.push('\n<div>\n	<article class="hentry compose" role="article">\n		<header>\n			<h1 class="entry-title">Here is title</h1>\n			<p class="meta">\n				<time>'),d={},e={},b.buffer.push(j(c._triageMustache.call(a,"date",{hash:{},contexts:[a],types:["ID"],hashContexts:e,hashTypes:d,data:b}))),b.buffer.push("</time>\n				&nbsp;|&nbsp;\n				<a href "),d={},e={},b.buffer.push(j(c.action.call(a,"submit",{hash:{},contexts:[a],types:["STRING"],hashContexts:e,hashTypes:d,data:b}))),b.buffer.push('>Submit</a>\n			</p>\n		</header>\n		<div class="entry-content"><p>Here is content</p></div>\n	</article>\n</div>\n'),f}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var g,h,i,j=this.escapeExpression,k=this;h={},i={},g=c["if"].call(b,"session.loggedIn",{hash:{},inverse:k.noop,fn:k.program(1,f,e),contexts:[b],types:["ID"],hashContexts:i,hashTypes:h,data:e}),g||0===g?e.buffer.push(g):e.buffer.push("")}),Ember.TEMPLATES.edit=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return b.buffer.push("\n				&nbsp;|&nbsp;\n				<a href "),d={},e={},b.buffer.push(k(c.action.call(a,"submit",{hash:{},contexts:[a],types:["STRING"],hashContexts:e,hashTypes:d,data:b}))),b.buffer.push(">Submit</a>\n				"),f}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var g,h,i,j="",k=this.escapeExpression,l=this;return e.buffer.push('<div>\n	<article class="hentry compose" role="article">\n		<header>\n			<h1 class="entry-title"></h1>\n			<p class="meta">\n				<time>'),h={},i={},e.buffer.push(k(c._triageMustache.call(b,"date",{hash:{},contexts:[b],types:["ID"],hashContexts:i,hashTypes:h,data:e}))),e.buffer.push("</time>\n				"),h={},i={},g=c["if"].call(b,"session.loggedIn",{hash:{},inverse:l.noop,fn:l.program(1,f,e),contexts:[b],types:["ID"],hashContexts:i,hashTypes:h,data:e}),(g||0===g)&&e.buffer.push(g),e.buffer.push('\n			</p>\n		</header>\n		<div class="entry-content"></div>\n	</article>\n</div>'),j}),Ember.TEMPLATES.header=Ember.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var f="";return f}),Ember.TEMPLATES.login=Ember.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var f,g,h,i,j="",k=this.escapeExpression,l=c.helperMissing;return e.buffer.push('<form role="form" id="login-form" '),g={on:b},h={on:"STRING"},e.buffer.push(k(c.action.call(b,"login",{hash:{on:"submit"},contexts:[b],types:["ID"],hashContexts:g,hashTypes:h,data:e}))),e.buffer.push(">\n	"),g={"class":b,value:b,type:b,placeholder:b},h={"class":"STRING",value:"ID",type:"STRING",placeholder:"STRING"},i={hash:{"class":"form-control form-group",value:"username",type:"text",placeholder:"Username"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n    "),g={"class":b,value:b,type:b,placeholder:b},h={"class":"STRING",value:"ID",type:"STRING",placeholder:"STRING"},i={hash:{"class":"form-control form-group",value:"password",type:"password",placeholder:"Password"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push('\n    <label class="form-group form-control">\n    	'),g={type:b,checked:b},h={type:"STRING",checked:"ID"},i={hash:{type:"checkbox",checked:"rememberme"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n    	Remember me\n	</label>\n    "),g={"class":b,type:b,value:b},h={"class":"STRING",type:"STRING",value:"STRING"},i={hash:{"class":"btn btn-primary col-md-12",type:"submit",value:"Log In"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n</form>"),j}),Ember.TEMPLATES.register=Ember.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var f,g,h,i,j="",k=this.escapeExpression,l=c.helperMissing;return e.buffer.push('<form role="form" id="register-form" '),g={on:b},h={on:"STRING"},e.buffer.push(k(c.action.call(b,"register",{hash:{on:"submit"},contexts:[b],types:["ID"],hashContexts:g,hashTypes:h,data:e}))),e.buffer.push(">\n	"),g={"class":b,value:b,type:b,placeholder:b},h={"class":"STRING",value:"ID",type:"STRING",placeholder:"STRING"},i={hash:{"class":"form-control form-group",value:"username",type:"text",placeholder:"Username"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n    "),g={"class":b,value:b,type:b,placeholder:b},h={"class":"STRING",value:"ID",type:"STRING",placeholder:"STRING"},i={hash:{"class":"form-control form-group",value:"password",type:"password",placeholder:"Password"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n    "),g={"class":b,value:b,type:b,placeholder:b},h={"class":"STRING",value:"ID",type:"STRING",placeholder:"STRING"},i={hash:{"class":"form-control form-group",value:"email",type:"text",placeholder:"Email address"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n    "),g={"class":b,type:b,value:b},h={"class":"STRING",type:"STRING",value:"STRING"},i={hash:{"class":"btn btn-primary col-md-12",type:"submit",value:"Register"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(k((f=c.input||b.input,f?f.call(b,i):l.call(b,"input",i)))),e.buffer.push("\n</form>"),j}),function(){var a=window.EmBlog=Ember.Application.create({ready:function(){this.register("session:current",a.Session),this.register("config:current",a.Config),this.inject("controller","session","session:current"),this.inject("controller","config","config:current")}})}(),function(){EmBlog.Config=Em.Object.extend({pbkdf2_keysize:16,pbkdf2_iterations:100})}(),function(){EmBlog.Session=Em.Object.extend({loggedIn:!1,username:"",csrf:""})}(),function(){EmBlog.ApplicationController=Em.ObjectController.extend({actions:{logout:function(){var a=this;$.post("/logout",{_csrf:a.session.get("csrf")}).then(function(b,c,d){200==d.status?(a.session.set("loggedIn",!1),a.session.set("username",""),a.transitionToRoute("index")):console.log("fails to logout")})}}})}(),function(){EmBlog.ArchivesController=Em.ObjectController.extend({actions:{getMoreArchives:function(){var a=this;EmBlog.Blogs.loadMoreBlogs().then(function(b){a.set("model",b.blogs),a.set("hasMore",b.hasMore)})}}})}(),function(){EmBlog.BlogController=Em.ObjectController.extend({inEditing:!1,actions:{deletePost:function(){var a=this;$.ajax({url:"/blog/"+a.get("model.id"),type:"DELETE",headers:{"X-CSRF-Token":a.session.get("csrf")}}).then(function(){EmBlog.Blogs.reset(),a.transitionToRoute("blogs")})}}})}(),function(){EmBlog.BlogsController=Em.ObjectController.extend({actions:{getMoreBlogs:function(){var a=this;EmBlog.Blogs.loadMoreBlogs().then(function(b){a.set("model",b.blogs),a.set("hasMore",b.hasMore)})}}})}(),function(){EmBlog.ChangePasswordController=Em.Controller.extend({reset:function(){this.setProperties({oldPassword:"",newPassword:"",errorMessage:""})},actions:{changePassword:function(){var a=this,b=this.getProperties("oldPassword","newPassword");b._csrf=a.session.get("csrf"),this.set("errorMessage",null),b.oldPassword=CryptoJS.PBKDF2(b.oldPassword,a.session.get("username"),{keySize:a.config.get("pbkdf2_keysize"),iterations:a.config.get("pbkdf2_iterations")}).toString(),b.newPassword=CryptoJS.PBKDF2(b.newPassword,a.session.get("username"),{keySize:a.config.get("pbkdf2_keysize"),iterations:a.config.get("pbkdf2_iterations")}).toString(),$.post("/change-password",b).then(function(b){a.set("errorMessage",b.message),b.success&&a.transitionToRoute("index")})}}})}(),function(){EmBlog.ComposeController=Em.ObjectController.extend({reset:function(){this.set("errorMessage","")},actions:{submit:function(){var a=this;$.post("/compose",{title:a.get("model.title"),content:a.get("model.content"),createTime:a.get("model.createTime"),_csrf:a.session.get("csrf")}).then(function(b){a.set("errorMessage",b.message),b.success&&(EmBlog.Blogs.reset(),a.transitionToRoute("index"))})}}})}(),function(){EmBlog.EditController=Em.ObjectController.extend({actions:{submit:function(){var a=this;$.ajax({url:"/blog/"+a.get("model.id"),type:"PUT",data:{title:a.get("model.title"),content:a.get("model.content"),_csrf:a.session.get("csrf")}}).then(function(b){b.success&&(EmBlog.Blogs.reset(),a.transitionToRoute("blog",a.get("model")))})}}})}(),function(){EmBlog.LoginController=Em.Controller.extend({reset:function(){this.setProperties({username:"",password:"",errorMessage:""})},actions:{login:function(){var a=this,b=this.getProperties("username","password","rememberme");b._csrf=a.session.get("csrf"),this.set("errorMessage",null),b.password=CryptoJS.PBKDF2(b.password,b.username,{keySize:a.config.get("pbkdf2_keysize"),iterations:a.config.get("pbkdf2_iterations")}).toString(),console.log(b),$.post("/auth",b).then(function(c){if(a.set("errorMessage",c.message),c.success){console.log("Login succeeded!"),a.session.set("loggedIn",!0),a.session.set("username",b.username);var d=a.get("attemptedTransition");d?(d.retry(),a.set("attemptedTransition",null)):a.transitionToRoute("index")}else a.session.set("loggedIn",!1)},function(){a.session.set("loggedIn",!1)})}}})}(),function(){EmBlog.RegisterController=Em.Controller.extend({reset:function(){this.setProperties({username:"",password:"",email:"",errorMessage:""})},actions:{register:function(){var a=this,b=this.getProperties("username","password","email");b._csrf=a.session.get("csrf"),this.set("errorMessage",null),b.password=CryptoJS.PBKDF2(b.password,b.username,{keySize:a.config.get("pbkdf2_keysize"),iterations:a.config.get("pbkdf2_iterations")}).toString(),$.post("/register",b).then(function(){a.transitionToRoute("/")})}}})}(),function(){EmBlog.Blog=Em.Object.extend({year:function(){return this.get("createTime").getFullYear()}.property("createTime"),month:function(){var a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEPT","OCT","NOV","DEC"];return a[this.get("createTime").getMonth()]}.property("createTime"),day:function(){return this.get("createTime").getDate()}.property("createTime"),daySuffix:function(){var a=this.get("day");return a>=11&&13>=a?"th":1==a%10?"st":2==a%10?"nd":3==a%10?"rd":"th"}.property("day"),date:function(){return this.get("month")+" "+this.get("day")+this.get("daySuffix")+", "+this.get("year")}.property("month","day","daySuffix","year")})}(),function(){var a=Em.RSVP.Promise;EmBlog.Blogs=Em.Object.extend({}),EmBlog.Blogs.reopenClass({loadingBlogs:!1,hasMore:!0,loadBlogs:function(){var b=this,c=1e6;return new a(function(a){b.blogs?a(b.blogs):a($.getJSON("/getblogs?page=1").then(function(a){var d=Em.A();return a.data.forEach(function(a){a.id=a._id,a.createTime=new Date(a.createTime);var b=EmBlog.Blog.create(a);b.get("year")<c?b.set("showYear",!0):b.set("showYear",!1),c=b.get("year"),d.pushObject(b)}),b.totalPages=a.total,b.prevYear=c,b.page=1,b.page>=b.totalPages&&(b.hasMore=!1),b.blogs=d,d}))})},reset:function(){this.blogs=null,this.hasMore=!0},loadMoreBlogs:function(){var b=this,c=b.prevYear;return new a(function(a,d){b.loadingBlogs&&!hasMore?d():(b.loadingBlogs=!0,a($.getJSON("/getblogs?page="+(b.page+1)).then(function(a){return a.data.forEach(function(a){a.id=a._id,a.createTime=new Date(a.createTime);var d=EmBlog.Blog.create(a);d.get("year")<c?d.set("showYear",!0):d.set("showYear",!1),c=d.get("year"),b.blogs.pushObject(d)}),b.page++,b.page>=b.totalPages&&(b.hasMore=!1),b.loadingBlogs=!1,{blogs:b.blogs,hasMore:b.hasMore}})))})},findBlogById:function(b){var c=this;return new a(function(a){a(c.loadBlogs().then(function(a){var c=a.findBy("id",b);return c?c:c}))})}})}(),function(){var a=Em.RSVP.Promise;EmBlog.User=Em.Object.extend({}),EmBlog.User.reopenClass({loadUser:function(){return new a(function(a){a($.getJSON("/getUser").then(function(a){return a}))})}})}(),function(){EmBlog.ApplicationRoute=Em.Route.extend({model:function(){return EmBlog.User.loadUser()},setupController:function(a,b){b.username?(a.session.loggedIn=!0,a.session.username=b.username):(a.session.loggedIn=!1,a.session.username=""),a.session.get("loggedIn")&&!a.session.get("csrf")&&$.getJSON("/csrf").then(function(b){a.session.set("csrf",b.csrf)})}})}(),function(){EmBlog.ArchivesRoute=Em.Route.extend({model:function(){return EmBlog.Blogs.loadBlogs()},setupController:function(a,b){a.set("model",b),a.set("hasMore",EmBlog.Blogs.hasMore)}})}(),function(){EmBlog.BlogRoute=Em.Route.extend({model:function(a){return EmBlog.Blogs.findBlogById(a.blog_id)},setupController:function(a,b){a.set("model",b),a.session.get("loggedIn")&&!a.session.get("csrf")&&$.getJSON("/csrf").then(function(b){a.session.set("csrf",b.csrf)})}})}(),function(){EmBlog.BlogsRoute=Em.Route.extend({model:function(){return EmBlog.Blogs.loadBlogs()},setupController:function(a,b){a.set("model",b),a.set("hasMore",EmBlog.Blogs.hasMore)}})}(),function(){EmBlog.ChangePasswordRoute=Em.Route.extend({setupController:function(a){a.session.loggedIn||this.transitionTo("login"),a.reset(),a.session.get("loggedIn")&&!a.session.get("csrf")&&$.getJSON("/csrf").then(function(b){a.session.set("csrf",b.csrf)})}})}(),function(){EmBlog.ComposeRoute=Em.Route.extend({model:function(){return EmBlog.Blog.create({createTime:new Date,title:"Title here",content:"<p>Content here</p>"})},setupController:function(a,b){a.session.loggedIn||this.transitionTo("login"),a.set("model",b),a.reset(),a.session.get("loggedIn")&&!a.session.get("csrf")&&$.getJSON("/csrf").then(function(b){a.session.set("csrf",b.csrf)})}})}(),function(){EmBlog.EditRoute=Em.Route.extend({model:function(a){return EmBlog.Blogs.findBlogById(a.blog_id)},setupController:function(a,b){a.session.loggedIn||this.transitionTo("login"),a.set("model",b),a.session.get("loggedIn")&&!a.session.get("csrf")&&$.getJSON("/csrf").then(function(b){a.session.set("csrf",b.csrf)})}})}(),function(){EmBlog.IndexRoute=Em.Route.extend({redirect:function(){this.transitionTo("archives")}})}(),function(){EmBlog.LoginRoute=Em.Route.extend({setupController:function(a){a.reset(),a.session.get("csrf")||$.getJSON("/csrf").then(function(b){a.session.set("csrf",b.csrf)})}})}(),function(){EmBlog.RegisterRoute=Em.Route.extend({setupController:function(a){a.reset(),a.session.get("csrf")||$.getJSON("/csrf").then(function(b){a.session.set("csrf",b.csrf)})}})}(),function(){EmBlog.ComposeView=Em.View.extend({didInsertElement:function(){var a=this;tinymce.init({selector:"div.entry-content",inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",setup:function(b){b.on("ExecCommand",function(){a.set("controller.model.content",b.getContent())}),b.on("KeyUp",function(){a.set("controller.model.content",b.getContent())}),b.on("SetContent",function(c){c.initial||a.set("controller.model.content",b.getContent())})}}),tinymce.init({selector:"h1.entry-title",inline:!0,toolbar:"undo redo",menubar:!1,setup:function(b){b.on("ExecCommand",function(){a.set("controller.model.title",b.getContent())}),b.on("KeyUp",function(){a.set("controller.model.title",b.getContent())}),b.on("SetContent",function(c){c.initial||a.set("controller.model.title",b.getContent())})}})}})}(),function(){EmBlog.EditView=Em.View.extend({didInsertElement:function(){var a=this;tinymce.init({selector:"div.entry-content",inline:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",setup:function(b){b.on("init",function(){b.setContent(a.get("controller.model.content"))}),b.on("ExecCommand",function(){a.set("controller.model.content",b.getContent())}),b.on("KeyUp",function(){a.set("controller.model.content",b.getContent())}),b.on("SetContent",function(c){c.initial||a.set("controller.model.content",b.getContent())})}}),tinymce.init({selector:"h1.entry-title",inline:!0,toolbar:"undo redo",menubar:!1,setup:function(b){b.on("init",function(){b.setContent(a.get("controller.model.title"))}),b.on("ExecCommand",function(){a.set("controller.model.title",b.getContent())}),b.on("KeyUp",function(){a.set("controller.model.title",b.getContent())}),b.on("SetContent",function(c){c.initial||a.set("controller.model.title",b.getContent())})}})}})}(),function(){EmBlog.Router.map(function(){this.resource("archives"),this.resource("blogs"),this.resource("blog",{path:"/blog/:blog_id"}),this.route("edit",{path:"/edit/:blog_id"}),this.route("login"),this.route("register"),this.route("compose"),this.route("changePassword",{path:"/change-password"})}),EmBlog.Router.reopen({location:"history"})}(),function(){var a=window.CryptoJS=a||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(255&c[e>>>2]>>>24-8*(e%4))<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(0|4294967296*a.random());return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=255&b[d>>>2]>>>24-8*(d%4);c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(255&b[d>>>2]>>>24-8*(d%4)));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});
d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var b=a,c=b.lib,d=c.WordArray,e=c.Hasher,f=[],c=b.algo.SHA1=e.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)f[j]=0|a[b+j];else{var k=f[j-3]^f[j-8]^f[j-14]^f[j-16];f[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+f[j],k=20>j?k+((e&g|~e&h)+1518500249):40>j?k+((e^g^h)+1859775393):60>j?k+((e&g|e&h|g&h)-1894007588):k+((e^g^h)-899497514),i=h,h=g,g=e<<30|e>>>2,e=d,d=k}c[0]=0|c[0]+d,c[1]=0|c[1]+e,c[2]=0|c[2]+g,c[3]=0|c[3]+h,c[4]=0|c[4]+i},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA1=e._createHelper(c),b.HmacSHA1=e._createHmacHelper(c)}(),function(){var b=a,c=b.enc.Utf8;b.algo.HMAC=b.lib.Base.extend({init:function(a,b){a=this._hasher=new a.init,"string"==typeof b&&(b=c.parse(b));var d=a.blockSize,e=4*d;b.sigBytes>e&&(b=a.finalize(b)),b.clamp();for(var f=this._oKey=b.clone(),g=this._iKey=b.clone(),h=f.words,i=g.words,j=0;d>j;j++)h[j]^=1549556828,i[j]^=909522486;f.sigBytes=g.sigBytes=e,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher;return a=b.finalize(a),b.reset(),b.finalize(this._oKey.clone().concat(a))}})}(),function(){var b=a,c=b.lib,d=c.Base,e=c.WordArray,c=b.algo,f=c.HMAC,g=c.PBKDF2=d.extend({cfg:d.extend({keySize:4,hasher:c.SHA1,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,d=f.create(c.hasher,a),g=e.create(),h=e.create([1]),i=g.words,j=h.words,k=c.keySize,c=c.iterations;i.length<k;){var l=d.update(b).finalize(h);d.reset();for(var m=l.words,n=m.length,o=l,p=1;c>p;p++){o=d.finalize(o),d.reset();for(var q=o.words,r=0;n>r;r++)m[r]^=q[r]}g.concat(l),j[0]++}return g.sigBytes=4*k,g}});b.PBKDF2=function(a,b,c){return g.create(c).compute(a,b)}}()}();