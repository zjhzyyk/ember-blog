

<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Alex Sexton</title>
  <meta name="author" content="Alex Sexton">

  
  <meta name="description" content="So someone shoulder-taps you and asks you to explain the concepts behind JavaScript Inheritance to them. In my eyes you&#8217;ve
got a few options. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alexsexton.com">
  <link href="/favicon.png" rel="icon">
  <link href="screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


</head>

<body class="collapse-sidebar">
  <header role="banner"><hgroup>
  <h1><a href="/">Alex Sexton</a></h1>
  
    <h2>Web Hacking. JavaScript.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/AlexSexton" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:alexsexton.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/understanding-javascript-inheritance/">Understanding JavaScript Inheritance</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-12T03:33:00-05:00" pubdate data-updated="true">Apr 12<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/understanding-javascript-inheritance/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So someone shoulder-taps you and asks you to explain the concepts behind JavaScript Inheritance to them. In my eyes you&#8217;ve
got a few options.</p>

<h2>The Terminology Play</h2>

<p>You mention that it&#8217;s <a href="https://www.google.com/search?q=define%3A+prototypal"><strong>prototypal</strong></a> inheritance, not <strong>prototypical</strong>
and pretty much gloss over the rest, comfortable in your superiority in terminology. You may go as far as saying &#8220;Objects just
come from other Objects because there aren&#8217;t any classes.&#8221; Then you just link to
<a href="http://javascript.crockford.com/prototypal.html">Crock&#8217;s Post</a> on it, and try to seem busy for the next few days.</p>

<p>Many years later you find out that <strong>Prototypal</strong> and <strong>Prototypical</strong> are synonyms, but you choose to ignore this.</p>

<h2>The Like-Classical-Inheritance-But-Different Play aka the Run-On Sentence Play</h2>

<p>&#8220;So in Java, like, you have classes or whatever, right? Well so imagine that you don&#8217;t have those, but you still want to do
that same type of thing or whatever, so then you just take another object instead of a class and you just kind of use it
like it&#8217;s a class, but it&#8217;s not because it can change and it&#8217;s just a normal object, and if it changes and you don&#8217;t override
the object, oh yea, so you can decide to override the parent object class thing, so if you dont do that and the parent changes
the link is live&#8230;&#8221;</p>

<p>And so forth.</p>

<h2>The Animal Play</h2>

<p>This is a pretty popular one.</p>

<p>So let&#8217;s say we want to make an <code>Animal</code> class in our code. As is often necessary in production JavaScript applications.</p>

<p>First we make a &#8220;constructor function,&#8221; which acts kind of like a constructor method on the inside of a class in a classical
language when it&#8217;s invoked with the <code>new</code> operator. Except this one is on the outside.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Animal</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">myAnimal</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Animal</span><span class="p">(</span><span class="s1">&#39;Annie&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then we want to have actions that all animals can do.</p>




<p>But then you want to define a more specific <em>type</em> of animal. Things start to get weird.</p>




<p>And you eventually simply converge on the&#8230;</p>

<h2>The Father/Son Analogy Play</h2>

<p>Here we go. Finally a <strong>real world</strong> example of &#8216;instances begetting instances.&#8217; It&#8217;ll be a perfect analogy.
It&#8217;s even an interview question some places. Let&#8217;s see how we might implement the relationship of a father
and son (or a parent to its child) in JavaScript.</p>

<p>We&#8217;ll start out like we did before, with a Human constructor</p>








<p>Err. <strong>yipes</strong>. Babies can&#8217;t talk. And what&#8217;s this deal with a baby being made by <strong>one</strong> parent. Not to worry,
we can fix all of this.</p>

<p>So now we support live lookups of parents, and, you know, some simplified genetics.</p>

<p>Isn&#8217;t that just a simple, well-defined, example of how straightforward inheritance can be in
JavaScript?</p>

<h2>Conclusion</h2>

<p>Sometimes these analogies get pretty crazy in my head, and I start to think that maybe
instead of trying to apply known examples in the outside world in order to help people
understand, it&#8217;s often better to just let someone know why they might wanna use
inheritance in their programs!</p>

<p>I personally find the best Prototypal Inheritance analogy to be:</p>

<p>So stop making everything so confusing and go program cool stuff, and ignore
my old presentations when I used these analogies.</p>

<p>&lt;3z</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/deploying-javascript-applications">Deploying JavaScript Applications</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-26T03:25:00-05:00" pubdate data-updated="true">Mar 26<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/deploying-javascript-applications#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>Preface:</strong> Nothing in this post is necessarily new, or even anything I thought of first (save for a name or two). However,
I&#8217;m writing it because I&#8217;d like to start building some consistency and naming conventions around a few of the techniques
that I am using (and are becoming more common), as well as document some processes that I find helpful.</p>

<p>Much of this comes from my experience deploying applications at Bazaarvoice as a large third party vendor, and should
probably be tailored to your specific environment. I&#8217;m sure someone does the <em>opposite</em> of me in each step
of this with good results.</p>

<p>Also, I fully understand the irony of loading a few MBs of GIFs in a post largely about performance,
but I like them. Any specific tools I mention are because I&#8217;m familiar with them, not necessarily because there
are no good alternatives. Feel free to comment on other good techniques and tools below. Facts appreciated.</p>

<h2>You</h2>

<p>You work on a large app. You might be a third party, or you might not be. You might be on a team, or you might not be.
You want maximum performance, with a high cache rate and extremely high availability.</p>

<h3>Dev with builds in mind</h3>

<p><img src="/images/js_app_deploy/gruntbuild.gif" alt="/images/js_app_deploy/gruntbuild.gif" /></p>

<p>Locally, you might run a static server with some <a href="http://requirejs.org/">AMD modules</a>, or a <a href="http://incident57.com/codekit/">&#8220;precompile server&#8221;</a>
in front of some <a href="http://sass-lang.com/">sass</a> and <a href="http://coffeescript.org/">coffeescript</a>, or <a href="http://browserify.org/">browserify</a> with
<a href="http://wiki.commonjs.org/wiki/Modules/1.1">commonjs modules</a>. Whatever you&#8217;re doing in development is your choice and not the topic du jour.</p>

<p>The hope is that you have a way of taking your dev environment files and wrapping them up into concisely built and minified JavaScript
and CSS files. Ideally this is an <a href="http://requirejs.org/docs/optimization.html#basics">easy step</a> for you, otherwise, you&#8217;ll tend to skip it.
<em>Optimize for ease of mind here.</em> I tend to disagree with the sentiment that <em>&#8216;script tags are enough.&#8217;</em> Try to manage your dependencies
in a single place, and that place probably isn&#8217;t in the order of your script tags in your HTML. Avoiding this step is easy until it isn&#8217;t.</p>

<h3>Loading what you need is better than byte shaving</h3>

<p>One technique at the build-stage that is ideal for performance, is building minimal packages based on likely use. At page load, you&#8217;ll want
to load, parse, and execute as little JavaScript as possible. Require.js allows you to &#8220;exclude&#8221; modules from your builds and
<a href="https://github.com/requirejs/example-multipage/blob/master/tools/build.js#L8-L45">create separate secondary modules</a>. Rather than shaving bytes
in your app files, you can avoid loading entire sections of code. Most sections of an app have predictable entry points that you can listen for
before injecting more functionality.</p>

<p>In our current app, only a fraction of the users click on the button that causes a specific flow to popup. Because of this we can
save ~20kb of code at page load time, and instead load it as a mouse gets close to the button, or after a few seconds of inactivity (to prime the cache).
This technique will go a much longer way than any of your normal byte saving tricks, but is not always the easiest and for that reason is often avoided.</p>

<p><img src="/images/js_app_deploy/delaypackage.gif" alt="/images/js_app_deploy/delaypackage.gif" /></p>

<p>Check your network panel the next time you have Gmail open to see how
<a href="http://googlecode.blogspot.com/2009/09/gmail-for-mobile-html5-series-reducing.html">Google feels about this technique</a>. They take an extra
step and bring the code in as text, and don&#8217;t bother parsing or executing it until they need to. This is good for low-powered/mobile devices.</p>

<p>In fact, some Googlers released a library, <a href="https://github.com/google/module-server">Module Server</a>, that allows you to do some of this dynamically.
It works with lots of module formats. And technically you could just use it to see how it decides to break up your files, and then switch
over to fully static files after you get that insight. They presented on it at JSConf.eu 2012:</p>

<div class="embed-video-container"><iframe src="http://www.youtube.com/embed/mGENRKrdoGY "></iframe></div>


<p>So instead of using a microjs cross-domain communication library that your coworker hacked together, just delay loading <a href="https://github.com/oyvindkinsey/easyXDM">EasyXDM</a>
until you need to do cross domain form POSTs.</p>

<h3>Don&#8217;t penalize modern users</h3>

<p>I&#8217;m all for progressive enhancement, and have to support IE6 in our primary application. However, it pains me when modern browser users have to pay
a performance price for the sins of others. It&#8217;s a good idea to try to support some level of &#8220;conditional builds&#8221; or &#8220;profile builds.&#8221; In the
AMD world, you can use the <a href="http://requirejs.org/docs/optimization.html#hasjs">has.js integration</a>, or if you&#8217;re feeling especially dirty, a build pragma.
However, third-parties have written some pretty nifty tools for doing this as a plugin.</p>

<p>One of the best tools for this that I&#8217;ve seen is <a href="https://github.com/jensarps/AMD-feature">AMD-feature</a>. It allows you
to use a set of known supported features to load the best fitting build for the current user. This can be great on mobile. You can silently switch
out jQuery with Zepto (assuming you stick to the shared subset). You can add and remove polyfills for the correct users. If 20% of your JavaScript
is loading for %3 of your users, something is backwards.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='JavaScript'><span class='line'><span class="nx">define</span><span class="p">({</span>
</span><span class='line'>    <span class="s1">&#39;dropdown&#39;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="nx">isAvailable</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>                <span class="c1">// test if we are on iOS</span>
</span><span class='line'>                <span class="k">return</span> <span class="nx">iOS</span> <span class="o">?</span> <span class="kc">true</span><span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>            <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>            <span class="nx">implementation</span><span class="o">:</span> <span class="s1">&#39;src/dropdown-ios&#39;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="nx">isAvailable</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>                <span class="c1">// if we end up here, we&#39;re not on iOS,</span>
</span><span class='line'>                <span class="c1">// so we can just return true.</span>
</span><span class='line'>                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>            <span class="p">},</span>
</span><span class='line'>            <span class="c1">// Naturally this is simiplified and doesn&#39;t actually</span>
</span><span class='line'>            <span class="c1">// imply Android</span>
</span><span class='line'>            <span class="nx">implementation</span><span class="o">:</span> <span class="s1">&#39;src/dropdown-android&#39;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// In your code, you would load your feature like this:</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span><span class="s1">&#39;feature!dropdown&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dropdown</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// The variable &#39;dropdown&#39; now contains</span>
</span><span class='line'>    <span class="c1">// the right implementation - no matter</span>
</span><span class='line'>    <span class="c1">// what platform the code is executed on,</span>
</span><span class='line'>    <span class="c1">// and you can just do this:</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">myDropdown</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dropdown</span><span class="p">();</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>One less jpeg</h3>

<p>Lots of people like repeating this one. <del>I think <a href="http://paulirish.com/">Paul Irish</a> coined it</del> <a href="http://twitter.com/ajpiano">Adam J Sontag</a> naturally coined it, but the idea is if that if you loaded one less jpeg on your
site, you could fit in quite a bit of unshaved JavaScript in its place. Consider this the next time you are sacrificing readability or compatibility for file size.</p>

<p><img src="/images/js_app_deploy/onelessjpg.gif" alt="/images/js_app_deploy/onelessjpg.gif" /></p>

<h2>Requests matter</h2>

<p>File size aside, the balance of a fast JS deployment lies somewhere between the number of requests, and the cachability of those requests.
It&#8217;s often alright to sacrifice the cachability of a small script if you can inline it without causing an additional request. The exact balance
is not one that I could possibly nail down, but you can probably think of a file that is dynamic enough and small enough in your application
that might make sense to just print it inline in your page.</p>

<h3>Package all the pieces together</h3>

<h4>Fonts and Icons</h4>

<p>These days, these two are synonymous. I really like using fonts as icons and have done so with great success. We try to find appropriate unicode
characters to map to the icons, but it can sometimes be a stretch. Drew Wilson&#8217;s <a href="http://pictos.cc/server/">Pictos Server</a> is an incredible way
to get going with this technique, though I might suggest buying a font pack in the end for maximum performance (so you can package it with your
application).</p>

<p><img src="/images/js_app_deploy/pictos.png" alt="/images/js_app_deploy/pictos.png" /></p>

<p>First, we inline fonts as data URIs for supporting browsers. Then we fallback to referencing separate files (at the cost of a request), and then we fallback
to images (as separate requests). This means we end up with different builds of our CSS files. Each CSS build only includes one of the techniques,
so no one user is penalized by the way another browser might need fonts. The <a href="http://filamentgroup.com/">Filament Group</a> has a tool for this called
<a href="https://github.com/filamentgroup/grunticon">Grunticon</a>. I&#8217;d highly recommend this technique. For every modern browser, you have a single
request for all styles and icons, with no additional weight from old IEs that don&#8217;t support data-URIs.</p>

<h4>CSS Files</h4>

<p>It&#8217;s typically the case that updates to JavaScript files necessitate changes to CSS as well. So these files usually have the same update times. For that
reason it&#8217;s pretty safe to package them together.</p>


<p>If you&#8217;re a third party or have little control over the pages you&#8217;re injected on, you&#8217;ll probably use a file. Otherwise, the code
should be small enough and dynamic enough to warrant inlining on a page.</p>

<h3>Build apps into self-contained folders</h3>

<p>When you build your application, you end up with a set of static files in a folder. Take this folder of files and assign a build number to it.
Then upload this to a distributed content delivery network. <a href="http://aws.amazon.com/s3/">S3</a> with <a href="http://aws.amazon.com/cloudfront/">CloudFront</a>
on top of it is an easy choice. The <a href="https://github.com/pifantastic/grunt-s3">Grunt S3 Plugin</a> is a good way to do this with the Grunt toolchain.
Bazaarvoice has an Akamai contract, so we tend to use them, but the idea is that you are getting your built files onto servers that are geographically
close to your users. It&#8217;s easy and cheap. Don&#8217;t skimp! Latency is king.</p>

<p>Now that you have an app on a static CDN, make sure it gets served gzipped (where appropriate, grunt-s3 can help with this), and then set the cache
headers on your built files to <strong>forever</strong>. Any changes will get pushed as a different set of built files in a totally different folder, these
files should be guaranteed to never change. The only exception to this rule is the <strong>Scout File</strong>, which lives <em>outside</em> of the build folders in the root
directory.</p>

<p>The scout file for our third-party app is a very small JS file that contains a build number and a bit of JavaScript to determine the  build profile
that needs to be loaded. It also contains the minimum amount of code to determine the initial data that we&#8217;re going to need for a page. It doesn&#8217;t
have jQuery, or really any dependencies, it just does exactly what it needs to do. This file is cached for about 5 minutes (should be relatively short, but
close to the average session length).</p>

<h3>Parallelizing the initial data request</h3>

<p>Many people use each of their models to make separate requests for data once the app is loaded. Unfortunately, this is terrible for performance. Not only
are there multiple requests, but they can&#8217;t be fired off until the BIG app files are loaded and executed. We want to parallelize the loading of our app
and our data. This is going to be tough for some folks, but it&#8217;s a huuuge performance win.</p>

<p>We use node.js to run our models at build time. We feed in each of the &#8220;page types&#8221; that we know how to handle. For each of these page types, each model registers
its intent to load data, and we build up a hash of data that is needed for each page type and stick that into the scout file.</p>

<p>Then we had our API folk create a batch API so we can make multiple data requests at once. We use this hash of needed data for each page type (we have less than
10 page types, and you probably do too) in order to fire off a single request for the data that <strong>all</strong> the models will need, before they are loaded. Unfortunately
the way to do this changes drastically based on your framework, but it&#8217;s worth your time!</p>

<h3>Statically generate your container pages and CDN them too</h3>

<p>If you aren&#8217;t rendering templates on the server, then there&#8217;s likely no reason you shouldn&#8217;t be statically compiling all of your page shells at their
appropriate urls, and uploading them to a static CDN along with your scripts. This is a <em>huge</em> performance improvement.</p>

<p>Distributing the HTML to geographically close servers can have big wins towards getting to your actual content more quickly. In the case that you are uploading your static HTML
pages up to the static cdn along with your JS Application, your HTML files can become your Scout File. Put a small cache on each static HTML
page and inline the contents that you would have put in a scout file. This serves the same purpose as before, except we&#8217;ve saved a request. The only thing
that isn&#8217;t highly cached on a close-by server is the data, and we&#8217;re already loading that in parallel with our app if we&#8217;ve followed the previous instructions.</p>

<p>This means the main URL for your site is just a CNAME to a Cloudfront url. Doesn&#8217;t that just <strong>sound</strong> nice? Talk about good uptime! Of course that
means the dynamic parts of your site would come from a subdomain like <code>api.mysite.com</code> or similar. The reduced latency of your initial HTML can be
a very nice win for performance since you&#8217;ve inlined a scout file to immediately load the rest of the app in parallel.</p>

<p>The smart peeps at <a href="http://nodejitsu.com/">Nodejitsu</a> put out <a href="http://blacksmith.jit.su/">Blacksmith</a> to help with static site generation a while
back, but there are <a href="http://blog.bmannconsulting.com/node-static-site-generators/">plenty of options</a>. Many apps are single page apps with
only an <code>index.html</code> file anyways, so you can skip the static generation all together.</p>

<h3>All this together</h3>

<p>The goal in all of this is to:</p>

<ul>
<li>geographically cache <em>anything</em> that&#8217;s static, not just images and jQuery.</li>
<li>cache your app until it changes, but not much longer.</li>
</ul>


<p>The folder structure I normally see is something like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># Simplified for Ease of Eyes</span>
</span><span class='line'>| S3-Bucket-1
</span><span class='line'>  |- app
</span><span class='line'>     |- b1234
</span><span class='line'>        |- build.js
</span><span class='line'>        |- build-svg.js
</span><span class='line'>        |- build-optional.css
</span><span class='line'>     |- b1235
</span><span class='line'>        |- build.js
</span><span class='line'>        |- build-svg.js
</span><span class='line'>        |- build-optional.css
</span><span class='line'>     |- b1236
</span><span class='line'>        |- build.js
</span><span class='line'>        |- build-svg.js
</span><span class='line'>        |- build-optional.css
</span><span class='line'>  |- index.html <span class="c"># or scout.js</span>
</span></code></pre></td></tr></table></div></figure>



<p>Deploying a new version of the app becomes &#8220;updating one variable.&#8221; This means that every user on the site will have a fully updated app in the amount
of time you cached your scout file for. In our case it&#8217;s 5 minutes. It&#8217;s a pretty good trade off for us. We get lifetime caching for our big files and media,
but have a very quick turn around time for critical fixes and consistent roll-outs. It also means that if we ever need to roll back, it&#8217;s a single variable
change to get people fully back on the old code. Clean up old builds as you feel is necessary.</p>

<h3>Other media requests</h3>

<p>Naturally, you&#8217;ll have some logo images, or some promo images to load as part of the app. These should probably just be <a href="http://imageoptim.com/">imageOptim</a>&#8216;d,
and sprited as best as possible. However, there is usually a second class of media on a site. Usually these are thumbnails and previews and avatars and such.
For these files, I&#8217;d suggest using a mechanism to lazy load these media files. Make sure you&#8217;re doing smart things with scroll event handlers (hint: throttling
the hell out of them), but you don&#8217;t want to load 50 avatars if the user is 1000px away from that part of your app. Just be smart about this stuff. It&#8217;s not
really my intent to cover this portion of app performance since it&#8217;s not entirely related to deployment.</p>

<h2>Wrap Up</h2>

<p>There&#8217;s nothing that surprising about these techniques. Everything that could possibly be statically generated is statically generated,
and thrown out on edge-cached servers. Every piece of functionality that isn&#8217;t needed on page load, isn&#8217;t loaded on page load. Everything that <em>is</em> needed
is loaded in parallel right away. Everything is cached forever, save for the scout file and the data request (you can save recent requests in local storage though!).</p>

<p>You aren&#8217;t left with much else to optimize. You are always only loading and executing the minimum amount of JavaScript, and saving it for the maximum amount
of time. Naturally the more common tips of not going overboard with external libraries, and paying attention to render performance, and serving HTML with the
page response are all ways to change the performance (usually for the better), but this architecture fits well with many of today&#8217;s more app-like deployments.</p>

<p>There&#8217;s something really comforting about exposing a minimal dynamic API that needs to be fast and having everything else served out of memory from nearby
static servers. You should totally try it.</p>
</div>
  
  


    </article>
  
  
   
  
  
   
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section style="padding-top:10px;">
  <img src="http://gravatar.com/avatar/7ea369b9b67a85f638af2e0f5d708d2d?s=260" alt="Alex Sexton" title="Alex Sexton" />
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/04/understanding-javascript-inheritance/">Understanding JavaScript Inheritance</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/deploying-javascript-applications">Deploying JavaScript Applications</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/introducing-the-jed-toolkit/">Introducing The Jed Toolkit</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/third-party-javascript-in-the-third-person/">Third Party JavaScript In The Third Person</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/third-party-front-end-performance-part-1/">Third Party Front-end Performance</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/SlexAxton" rel="me">@SlexAxton</a> on GitHub
  
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  
    <a href="http://twitter.com/SlexAxton" class="twitter-follow-button" data-show-count="true">Follow @SlexAxton</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107780139765882604901/posts" rel="me">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Alex Sexton -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

</body>
</html>
